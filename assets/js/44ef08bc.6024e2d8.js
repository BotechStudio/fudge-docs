(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{79:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return i})),a.d(t,"metadata",(function(){return s})),a.d(t,"toc",(function(){return c})),a.d(t,"default",(function(){return p}));var r=a(3),n=a(7),o=(a(0),a(97)),i={id:"form-validation",title:"Form validation"},s={unversionedId:"form-validation",id:"form-validation",isDocsHomePage:!1,title:"Form validation",description:"Intro",source:"@site/docs/form-validation.md",slug:"/form-validation",permalink:"/docs/form-validation",version:"current",sidebar:"someSidebar",previous:{title:"Errors handling",permalink:"/docs/handling-errors"},next:{title:"Socket.io notifications",permalink:"/docs/socket-notifications"}},c=[{value:"Intro",id:"intro",children:[]},{value:"Use case",id:"use-case",children:[]}],l={toc:c};function p(e){var t=e.components,a=Object(n.a)(e,["components"]);return Object(o.a)("wrapper",Object(r.a)({},l,a,{components:t,mdxType:"MDXLayout"}),Object(o.a)("h3",{id:"intro"},"Intro"),Object(o.a)("p",null,"In order to create simple yet secure form validations, fudge's team uses the ",Object(o.a)("a",{parentName:"p",href:"https://react-hook-form.com"},"react-hook-form")," validation package."),Object(o.a)("p",null,"the react-hook-form package enable to create a performant, flexible and extensible forms with easy to use validation."),Object(o.a)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.a)("div",{parentName:"div",className:"admonition-heading"},Object(o.a)("h5",{parentName:"div"},Object(o.a)("span",{parentName:"h5",className:"admonition-icon"},Object(o.a)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.a)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(o.a)("div",{parentName:"div",className:"admonition-content"},Object(o.a)("p",{parentName:"div"},"For instace, we will take a look at the reset password modal form validation, wich located at ",Object(o.a)("strong",{parentName:"p"},"client > app > components > ResetPassModal > index.js"),"."))),Object(o.a)("h3",{id:"use-case"},"Use case"),Object(o.a)("p",null,'As we can see, the "useForm" method wich provided by react-hook-form is imported at the top of the file:'),Object(o.a)("pre",null,Object(o.a)("code",{parentName:"pre",className:"language-javascript"},"import { useForm } from 'react-hook-form';\n")),Object(o.a)("p",null,"the ",Object(o.a)("strong",{parentName:"p"},"useForm")," function, takes three parameters as arguments like so:"),Object(o.a)("pre",null,Object(o.a)("code",{parentName:"pre",className:"language-javascript"},"const { register, handleSubmit, errors } = useForm({\n    validationSchema: createSchemaWithIntl(intl)\n});\n")),Object(o.a)("ul",null,Object(o.a)("li",{parentName:"ul"},Object(o.a)("strong",{parentName:"li"},"register"),' - a function that "register\'s" the specific input to the react form hook ',Object(o.a)("code",null,"ref={register}"),"."),Object(o.a)("li",{parentName:"ul"},Object(o.a)("strong",{parentName:"li"},"handleSubmit")," - the function that is activated when the form submit's."),Object(o.a)("li",{parentName:"ul"},Object(o.a)("strong",{parentName:"li"},"errors")," - the errors may occur during the form submittion.")),Object(o.a)("p",null,"The ",Object(o.a)("strong",{parentName:"p"},"validation process")," composed from few parts: the useForm, messages for validation errors and validation rules. as we allready saw, the useForm hook handle the submit, getting the errors and register inputs to the form."),Object(o.a)("p",null,"the validation messages that related to the resetPassModal form, located at ",Object(o.a)("strong",{parentName:"p"},"client > app > components > ResetPassModal > validation.js")," and defines the validation errors may occur:"),Object(o.a)("pre",null,Object(o.a)("code",{parentName:"pre",className:"language-javascript"},"const messages = defineMessages({\n  emailRequired: {\n    id: `${scope}.emailRequired`,\n    defaultMessage: 'Email is required',\n  },\n  emailValid: {\n    id: `${scope}.emailValid`,\n    defaultMessage: 'Email must be a valid email',\n  }\n});\n")),Object(o.a)("p",null,"the last part of the form validation is the rules. the rules of our form defined at ",Object(o.a)("strong",{parentName:"p"},"client > app > components > ResetPassModal > validation.js")," and takes care about the validation shape."),Object(o.a)("pre",null,Object(o.a)("code",{parentName:"pre",className:"language-javascript"},"export const createSchemaWithIntl = (intl) => {\n  return yup.object().shape({\n    email: yup\n      .string()\n      .required(intl.formatMessage(messages.emailRequired))\n      .email(intl.formatMessage(messages.emailValid))\n  });\n};\n")),Object(o.a)("p",null,"as we can see, the shape created using ",Object(o.a)("a",{parentName:"p",href:"https://www.npmjs.com/package/yup"},"yup")," package wich is a JavaScript schema builder for value parsing and validation."))}p.isMDXComponent=!0},97:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var r=a(0),n=a.n(r);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=n.a.createContext({}),p=function(e){var t=n.a.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},d=n.a.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),d=p(a),u=r,f=d["".concat(i,".").concat(u)]||d[u]||m[u]||o;return a?n.a.createElement(f,s(s({ref:t},l),{},{components:a})):n.a.createElement(f,s({ref:t},l))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var l=2;l<o;l++)i[l]=a[l];return n.a.createElement.apply(null,i)}return n.a.createElement.apply(null,a)}d.displayName="MDXCreateElement"}}]);