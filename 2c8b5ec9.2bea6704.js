(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{64:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return o})),r.d(t,"metadata",(function(){return i})),r.d(t,"rightToc",(function(){return s})),r.d(t,"default",(function(){return p}));var n=r(2),a=r(6),c=(r(0),r(82)),o={id:"handling-errors",title:"Errors handling"},i={unversionedId:"handling-errors",id:"handling-errors",isDocsHomePage:!1,title:"Errors handling",description:"Intro",source:"@site/docs\\handling-errors.md",slug:"/handling-errors",permalink:"/docs/handling-errors",version:"current",sidebar:"someSidebar",previous:{title:"Localization",permalink:"/docs/using-translations"},next:{title:"Form validation",permalink:"/docs/form-validation"}},s=[{value:"Intro",id:"intro",children:[]},{value:"The state",id:"the-state",children:[]},{value:"Error handling steps",id:"error-handling-steps",children:[]},{value:"Use case",id:"use-case",children:[]}],l={rightToc:s};function p(e){var t=e.components,r=Object(a.a)(e,["components"]);return Object(c.b)("wrapper",Object(n.a)({},l,r,{components:t,mdxType:"MDXLayout"}),Object(c.b)("h3",{id:"intro"},"Intro"),Object(c.b)("p",null,"As our application grows, the way we are handling errors should become more elegant, clean and efficient to prevent missunderstadings and time waste."),Object(c.b)("p",null,"Fudge's team, created a simple and maintainable way to handle errors by using ",Object(c.b)("strong",{parentName:"p"},"redux"),"'s state and a\ngeneral error modal (wich can be replaced)."),Object(c.b)("h3",{id:"the-state"},"The state"),Object(c.b)("p",null,'At any given time, the application holds in redux\'s state a value called "error".\nthe "error" holds a boolean value wich determines wether or not to give the end-user an indication about erorr happening.'),Object(c.b)("p",null,"The initial error state can be found at: ",Object(c.b)("br",null)," ",Object(c.b)("strong",{parentName:"p"},"client > app > containers > App > reducer.js")),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"export const initialState = {\n  //other key:value pairs\n  error: false,\n  //other key:value pairs\n};\n")),Object(c.b)("h3",{id:"error-handling-steps"},"Error handling steps"),Object(c.b)("p",null,"To update the redux error state value, we should make several steps:"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"Create an action"),Object(c.b)("li",{parentName:"ul"},"Create a constant"),Object(c.b)("li",{parentName:"ul"},"Add a specific corresponding case in the reducer"),Object(c.b)("li",{parentName:"ul"},"Dispatch the action with some event")),Object(c.b)("p",null,"examples:"),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"Action")),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"export function setError() {\n  return {\n    type: SET_ERROR,\n    error: true\n  };\n}\n")),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"Constant")),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"export const SET_ERROR = 'boilerplate/App/SET_ERROR';\n")),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"Reducer")),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"case RESET_ERROR:\n        draft.error = action.error;\n        break;\n")),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"Dispatch")),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"onClick={() => dispatch(setError())}\n")),Object(c.b)("h3",{id:"use-case"},"Use case"),Object(c.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(c.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(c.b)("h5",{parentName:"div"},Object(c.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(c.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(c.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(c.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(c.b)("p",{parentName:"div"},'For the use case example, we will take a look at the "signUpUser" error handling flow.\nwich located in ',Object(c.b)("strong",{parentName:"p"},"client > app > containers > SignUpUser > saga.js"),"."))),Object(c.b)("p",null,"As we can see at the saga.js file, the api call placed inside try/catch block. the reason for that is the fact that if somthing went wrong at the server or with the call to the end point, we want to activate an ",Object(c.b)("strong",{parentName:"p"},"action")," that will update the error's state. as we can see:"),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"yield put(userSignUpError(err));\n")),Object(c.b)("p",null,"the userSignUpError action imported from actions.js as we can see at the top of the file:"),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"import { userSignUpError } from '../App/actions';\n")),Object(c.b)("p",null,"the action accept's the server response (if exists) and decide's what to return:"),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"export function userSignUpError(error) {\n  try {\n    const res = JSON.parse(String(error).slice(7));\n    if (res.code === 11000) {\n      return {\n        type: SIGNUP_USER_ERROR,\n        error: 'User Already Exists'\n      };\n    }\n    return {\n      type: SIGNUP_USER_ERROR,\n      error,\n    };\n  } catch (e) {\n    return {\n      type: SIGNUP_USER_ERROR,\n      error,\n    };\n  }\n}\n")),Object(c.b)("p",null,"then, the error state updated and indicates the end-user that somthing went wrong."))}p.isMDXComponent=!0},82:function(e,t,r){"use strict";r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return O}));var n=r(0),a=r.n(n);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=a.a.createContext({}),p=function(e){var t=a.a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},b=function(e){var t=p(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=a.a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,c=e.originalType,o=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),b=p(r),d=n,O=b["".concat(o,".").concat(d)]||b[d]||u[d]||c;return r?a.a.createElement(O,i(i({ref:t},l),{},{components:r})):a.a.createElement(O,i({ref:t},l))}));function O(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var c=r.length,o=new Array(c);o[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:n,o[1]=i;for(var l=2;l<c;l++)o[l]=r[l];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,r)}d.displayName="MDXCreateElement"}}]);